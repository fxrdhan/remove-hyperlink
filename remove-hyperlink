#!/bin/bash

# Nama skrip: remove-hyperlink
# Deskripsi: Menghapus format hyperlink dari file Markdown, termasuk pola khusus seperti [[teks\]](url).

# Fungsi untuk menampilkan penggunaan skrip
usage() {
    echo "Usage: $0 input.md [output.md]"
    exit 1
}

# Cek apakah setidaknya ada satu argumen
if [ $# -lt 1 ]; then
    usage
fi

input_file="$1"

# Cek apakah file input ada
if [ ! -f "$input_file" ]; then
    echo "Error: File '$input_file' tidak ditemukan."
    exit 1
fi

# Jika ada argumen kedua, gunakan sebagai file output
if [ $# -ge 2 ]; then
    output_file="$2"
    # Gunakan sed untuk menghapus hyperlink dan simpan ke file output
    sed -E '
        # Menghapus hyperlink dengan pola [[teks\]](url)
        s/\[\[([^\\\]]+)\\?\]\]\([^)]*\)/\1/g;
        # Menghapus hyperlink standar [teks](url)
        s/\[([^]]+)\]\([^)]*\)/\1/g
    ' "$input_file" > "$output_file"
    echo "Hyperlink telah dihapus dan hasil disimpan di '$output_file'."
else
    # Jika tidak ada argumen kedua, tampilkan hasil di terminal
    sed -E '
        s/\[\[([^\\\]]+)\\?\]\]\([^)]*\)/\1/g;
        s/\[([^]]+)\]\([^)]*\)/\1/g
    ' "$input_file"
fi

